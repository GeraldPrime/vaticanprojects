{% extends 'user/base.html' %}

{% block body %}
    <div class="content-page">
        <div class="content">
            <!-- Start Content-->
            <div class="container-fluid">
                <!-- start page title -->
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="{% url 'user' %}">Home</a></li>
                                    <li class="breadcrumb-item">Frontend Extras</li>
                                    <li class="breadcrumb-item"><a href="{% url 'forms_list' %}">All Forms</a></li>
                                    <li class="breadcrumb-item active">Edit Form</li>
                                </ol>
                            </div>
                            <h4 class="page-title">Edit Form</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h4 class="card-title">Edit Form Details</h4>
                                <div>
                                    <a href="{{ form.form_file.url }}" class="btn btn-outline-primary me-2" download>
                                        <i class="ri-download-line align-middle me-1"></i> Download Current File
                                    </a>
                                    <a href="{% url 'forms_list' %}" class="btn btn-secondary">
                                        <i class="ri-arrow-left-line align-middle me-1"></i> Back to Forms
                                    </a>
                                </div>
                            </div>
                            <div class="card-body">
                                <form method="post" enctype="multipart/form-data" action="{% url 'edit_form' form.id %}">
                                    {% csrf_token %}
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="form_name" class="form-label">Form Name</label>
                                                <input type="text" class="form-control" id="form_name" name="name" required placeholder="Enter form name" value="{{ form.name }}">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="form_file" class="form-label">Form File</label>
                                                <input type="file" class="form-control" id="form_file" name="form_file">
                                                <small class="form-text text-muted">Current file: {{ form.form_file.name }}. Upload a new file only if you want to replace the current one.</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="mb-3">
                                                <label for="description" class="form-label">Description</label>
                                                <textarea class="form-control" id="description" name="description" rows="4" placeholder="Enter form description">{{ form.description }}</textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card bg-light">
                                                <div class="card-body">
                                                    <h5 class="card-title">Form Details</h5>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <p class="mb-1"><strong>File Type:</strong> {{ form.file_type }}</p>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <p class="mb-1"><strong>Uploaded:</strong> {{ form.created_at|date:"M d, Y H:i" }}</p>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <p class="mb-1"><strong>Last Updated:</strong> {{ form.updated_at|date:"M d, Y H:i" }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-end mt-3">
                                        <button type="submit" class="btn btn-success">
                                            <i class="ri-save-line align-middle me-1"></i> Save Changes
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- container -->
        </div>
    </div>
{% endblock body %}